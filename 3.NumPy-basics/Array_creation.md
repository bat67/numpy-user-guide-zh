<!-- TOC -->

- [创建数组](#%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84)
    - [导言](#%E5%AF%BC%E8%A8%80)
    - [将Python类似数组的对象转换为NumPy数组](#%E5%B0%86python%E7%B1%BB%E4%BC%BC%E6%95%B0%E7%BB%84%E7%9A%84%E5%AF%B9%E8%B1%A1%E8%BD%AC%E6%8D%A2%E4%B8%BAnumpy%E6%95%B0%E7%BB%84)
    - [内置的NumPy数组创建](#%E5%86%85%E7%BD%AE%E7%9A%84numpy%E6%95%B0%E7%BB%84%E5%88%9B%E5%BB%BA)
    - [从磁盘读取数组](#%E4%BB%8E%E7%A3%81%E7%9B%98%E8%AF%BB%E5%8F%96%E6%95%B0%E7%BB%84)
        - [标准二进制格式](#%E6%A0%87%E5%87%86%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%A0%BC%E5%BC%8F)
        - [普通的ASCII格式](#%E6%99%AE%E9%80%9A%E7%9A%84ascii%E6%A0%BC%E5%BC%8F)
        - [自定义二进制格式](#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%A0%BC%E5%BC%8F)
        - [特殊库的使用](#%E7%89%B9%E6%AE%8A%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8)

<!-- /TOC -->
# 创建数组

> 原文：[Array creation](http://docs.scipy.org/doc/numpy-dev/user/basics.creation.html)

> 另见：
[数组创建例程](http://docs.scipy.org/doc/numpy-dev/reference/routines.array-creation.html#routines-array-creation)

## 导言

数组创建的一般机制有五种：

- 从其它Python的结构转换（如列表和元组）
- 内置的NumPy数组创建对象（如 `arange`, `ones`, `zeros`以及其它）
- 从磁盘中读取标准或自定义格式的数据
- 通过使用字符串或者缓冲区，从原始的字节创建数组
- 使用特殊的库函数（比如`random`）

本节不会涉及复制和连接等扩展和转换现有数组的方法，也不会涉及创建对象数组和结构化数组。这些会在它们自己的章节中讲述。

## 将Python类似数组的对象转换为NumPy数组

通常，Python中排列为数组结构的数值数据可以通过`array()`函数来转换成数组，典型的例子就是列表和元组。具体使用方法请见`array()`函数的文档。一些对象也支持数组的协议，并且可以用这种方法转换成数组。辨识一个对象是否能转换为数组，最简单的方法就是在交互式环境中尝试这一方法，看看它是否有效（即Python之道）。

例如：

```python
>>> x = np.array([2,3,1,0])
>>> x = np.array([2, 3, 1, 0])
>>> x = np.array([[1,2.0],[0,0],(1+1j,3.)]) # note mix of tuple and lists,
    and types
>>> x = np.array([[ 1.+0.j, 2.+0.j], [ 0.+0.j, 0.+0.j], [ 1.+1.j, 3.+0.j]])
```

## 内置的NumPy数组创建

NumPy具有从无到有创建数组的内置功能：

`zeros(shape)` 将创建一个填充为0的指定形状的数组。

```python
>>> np.zeros((2, 3)) array([[ 0., 0., 0.], [ 0., 0., 0.]])
```

`ones(shape)` 将创建一个填充为1的数组。在其他所有方面都和`zeros`相同。

`arange()`将创建有规律的增量值数组。它的几种用法请见docstring。这里给出几个例子：

```python
>>> np.arange(10)
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
>>> np.arange(2, 10, dtype=np.float)
array([ 2., 3., 4., 5., 6., 7., 8., 9.])
>>> np.arange(2, 3, 0.1)
array([ 2. , 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.9])
```

请注意，关于最后一个用例，有一些使用技巧，请见`arrange`的docstring。

`linspace()`将以指定数量的元素创建数组，并平分开始值和结束值。例如：

```python
>>> np.linspace(1., 4., 6)
array([ 1. ,  1.6,  2.2,  2.8,  3.4,  4. ])
```

这些创建函数的好处是，可以保证元素个数、起始点和结束点，`arange()`一般不会指定任意的起始值、结束值和步长。

`indices()`将创建数组的集合（用一维数组来模拟高维数组），每一维都有表示它的变量。一个例子说明比口头描述好得多：

```python
>>> np.indices((3,3))
array([[[0, 0, 0], [1, 1, 1], [2, 2, 2]], [[0, 1, 2], [0, 1, 2], [0, 1, 2]]])
```

计算规则网格上的高维函数时，这会非常有用。

## 从磁盘读取数组

这大概是大数组创建的最常见情况。当然，细节取决于磁盘上的数据格式，所以这一节只能给出如何处理各种格式的一般建议。

### 标准二进制格式

各个领域都有数组数据的标准格式。以下列出了用于读取和返回NumPy数组的已知Python库（也有其它的库可以读取数组并转换为NumPy数组，所以也请看一下最后一节）

```python
HDF5: PyTables
FITS: PyFITS
```

一些格式不能直接读取，但是不难将其转换为类似PIL库（能够读写许多图像格式，例如jpg、png以及其它）所支持的格式。

### 普通的ASCII格式

逗号分隔值文件（CSV）被广泛使用（可以被类似Excel的一些程序导入导出）。有一些在python中读取这些文件的方法，例如Python和pylab（Matplotlib的一部分）中的函数。

更通用的ASCII文件可以使用SciPy的IO包来读取。

### 自定义二进制格式

有多种方法可以使用。如果文件有一个相对简单的格式，那么你可以写一个简单的I/O库并使用`numpy fromfile()`和`tofile()`方法直接读写NumPy数组（注意字节顺序！）。如果有一个不错的C/C++库可以用于读取数据，则可以用各种技巧把它封装一下，虽然这可能要耗费一些工作量，也需要更多高级的知识来和C/C++交互。

### 特殊库的使用

有一些库可以用于生成特殊用途的数组，这样的库不可能全部列举出来。最常见的用法是使用许多数组生成函数来产生带有随机值的数组，以及使用一些生成特殊矩阵（如对角线）的功能函数。